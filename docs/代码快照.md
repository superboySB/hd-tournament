# 代码快照
## 获取observation
通过obs.my_planes保证了信息的屏蔽，我方2个有人机，4个无人机
[![79d52c12d810ef0e59605e6d1c39096.png](https://i.postimg.cc/2S4LzWpF/79d52c12d810ef0e59605e6d1c39096.png)](https://postimg.cc/VJkkgdkd)

MyPlaneInfo中的float变量与范围整理，可作为有人机、无人机的共用observation表示，[]内简单的normalization需要乘的量
- [X] acc_nz 法向过载 [1] **注意**敌方信息不加这个
- [X] alpha 迎角 [1]
- [X] beta 侧滑角 [1]
- [ ] cas 校准空速 [0.01]
- [ ] height 高度 [0.001]
- [ ] ind 飞机编号 8894、....六架飞机 我发现id是随机的
- [X] is uav 建立一个onehot x2 [有人机的1 无人机的1]
- [ ] lat 经度
- [ ] lon 纬度
- [X] loadout 建立一个onehot x8 [中1100 近1100] 或者 [中0000 近1111] 打掉一个则置0   **注意**敌方信息不加这个
- [ ] mach 马赫数 [1]
- [X] mid_lock_list 很难写到状态里，只能说先给一个bool值 0表示空 1表示有
- [X] short_lock_list 很难写到状态里，只能说先给一个bool值 0表示空 1表示有
- [X] omega_p 绕机体x轴角速度 
- [X] omega_q 绕机体y轴角速度
- [X] omega_r 绕机体z轴角速度
- [X] pitch 俯仰角
- [X] roll 滚转角
- [ ] side red/blue 考虑自博弈不加
- [X] sp 速度 [0.01]
- [ ] tas 真实空速 [0.01]
- [X] v_north 北向速度分量 [0.01] 
- [X] v_east 东向速度分量 [0.01] 
- [X] v_down 地向速度分量 [1]
- [X] x [0.0001] 自身信息使用距离各个起点的相对位置，5个队友信息、6个敌人信息使用相对我方当前位置的相对距离：|x-x_ego|*0.0001
- [X] y [0.0001] 自身信息使用距离各个起点的相对位置， 5个队友信息、6个敌人信息使用相对距离：|y-y_ego|*0.0001
- [X] z [0.001] 自身信息使用距离各个起点的相对位置， 5个队友信息、6个敌人信息使用相对距离：|z-z_ego|*0.001   **需要注意范围在-4000~6000之间**
- [X] yaw [1]
- [ ] (IDEAL) uid

一个完整的observation需要concat以下属性
global_state 
self_state 
ally_agent_state 
enemy_agent_state（少量）


my planes
[![image.png](https://i.postimg.cc/bY7x0khk/image.png)](https://postimg.cc/xqPNnkq1)
[![image.png](https://i.postimg.cc/d0NdhT67/image.png)](https://postimg.cc/HJ5jKnfH)

enemy state
[![image.png](https://i.postimg.cc/pdy47rWf/image.png)](https://postimg.cc/2qR0LzBy)
[![image.png](https://i.postimg.cc/4yJLbSqL/image.png)](https://postimg.cc/cgbBdXsw)
[![image.png](https://i.postimg.cc/Hnvw8YM2/image.png)](https://postimg.cc/dZdkzK4k)

## 关于action
6个id，每一个的底层动作目前都是两组键值对
- control: 滚转[-1,1]   俯仰[-1,1]  偏航[-1,1]  油门杆位移[0,1]
- weapon: short_missile / middle_missile + target_id

## 关于step与reward相关
每一个飞机一个奖励，目前只加了命中奖励，还需要加dense reward